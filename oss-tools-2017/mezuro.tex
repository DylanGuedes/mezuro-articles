\documentclass{llncs}

\usepackage{llncsdoc}
\usepackage{graphicx,url}
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage{float}
\usepackage{setspace}

\usepackage{tabularx}
\usepackage{cite}
\usepackage{hyperref}

\begin{document}
\sloppy
\title{Mezuro: Understading source code metrics}

\author{Rafael Manzo\inst{1}, Diego Camarinha\inst{1},
        Dylan Guedes\inst{1}, Paulo Meirelles\inst{1,2}}

\institute{Instituto de Matemática e Estatística -- Universidade de São Paulo (USP)\\
  Rua do Matão, 1010 -- 05508-090 -- Cidade Universitária -- São Paulo -- SP -- Brasil\\
  \email{\{diegoamc,manzo\}@ime.usp.br}
  \and
  Faculdade do Gama -- Universidade de Brasília (UnB)\\
  Gama -- DF -- Brasil\\
  \email{djmgguedes@gmail.com,paulormm@unb.br}}

\maketitle
\begin{abstract}
  % Contexto
  A facilidade de desenvolvimento e manutenção de um software está
diretamente relacionada com a qualidade de seu código-fonte.
  % Problema
  No entanto, analisá-lo impõe dificuldades como, por exemplo, definir as
métricas e interpretar o resultado de uma medição. Além disso, essa prática
ainda não é comum em ambientes de desenvolvimento. Outro problema é a falta de
ferramentas livres que integrem coletores de métricas para diversas liguagens.
  % Soluções propostas
  Neste artigo, apresentamos o Mezuro, uma plataforma web livre para a
avaliação colaborativa de código-fonte. O projeto fornece um meio para comparar
projetos e compartilhar conhecimento sobre métricas, ensinando a configurá-las
e interpretá-las. A plataforma foi idealizada de forma que seja possível
integrar diversos coletores de métricas para diversas linguagens. Atualmente, a
ferramenta permite analisar códigos escritos nas linguagens C, C++, Java e
Ruby.
  % Frase de impacto
  Com este projeto, esperamos disseminar o conhecimento e incentivar o uso de
métricas de código.

\textbf{Palavras-chave:} análise estática, métricas de código-fonte,
\textit{software} livre.
\end{abstract}


\section{Introduction}
\label{sec:intro}

Static source code metrics are measures extracted from code without compiling
or nunning it. These metrics can be primitive or composed, and have as main
role the function to provide information about complexity, compreension,
testability, maintainability and evolution of code.

Metrics can be simple such as lines of code and number of methods per class or
complex as afferent connections of a class. Nowadays, several tools can be
used to extract metrics, such as
pylint\footnote{\url{http://www.pylint.org/}} (Python),
metric\_fu\footnote{\url{https://github.com/metricfu/metric_fu}} (Ruby), and
Analizo\footnote{\url{http://www.analizo.org/}} (C/C++ and Java), each one with
different levels of usability, definitions and set of metrics, being necessary
the creation of a platform that brings and present these results to the end
user, specially in the quality tracking of a software during its life cycle.

Code metric tools, in general, do not present a friendly interface, and,
even more, they do not follow a standard. Therefore, this work present the
Mezuro platform which (i) has an interface that groups available tools;
(ii) allow selection and composition of metrics in a flexible manner;
(iii) preserves the evolution log;
(iv) presents results in a friendly way;
(v) allow the user to create and interpretation parameters based on the given
context.

\section{Related tools}

There are two tools related to Mezuro. The first, SonarQube\footnote{\url{http://www.sonarqube.org/}}, is a free software licensed as LGPLv3, and offers a platform to manage software quality by using plugins through a 
library\footnote{\url{http://docs.codehaus.org/display/SONAR/Plugin+Library/}}.
At its most basic version it classifies code problems and evaluate simple
coverage metrics and technical debts in several languages. However, its best
plugins are paid and closed source, such as the
C/C++ analyzer\footnote{\url{http://www.sonarsource.com/products/plugins/languages/cpp/}}.

The second, Code Climate\footnote{\url{https://codeclimate.com/}}, is a tool
that analysis source code hosted in a Git server, and has support for several
programming languages and frameworks. The analysis will look for code smells
in the code and classify them based on aspects such as size of methods and
code duplication. Lastly, based on the score of its parts, the project will
receive a grade between A and F. Keep in mind that what is tagged as an issue
sometimes is not a real problem, since it could be the best solution for the
given scenario.

Mezuro, idealized as a code metrics platform, has the differential to
continuous generate reviews about the project: the user schedule the
analysis and follows scores evolution over time. Results of each analysis
are public, what allows greater transparency between the developer and the
community that uses the software. Thereby, they decide if the given solution
meets the requirements and if they should trust in the quality of the software.

\section{The Mezuro project}
\label{sec:mezuro}

Mezuro is composed of two parts: processing and evaluation of source code
metrics; and a graphic interface to present results. Nowadays, the processing
module is Kalibro and the visualization Prezento, Mezuro being so the set of
these projects, that is, Kalibro integrated with Prezento.

Since its first implementation in 2010 (REF cbsoft 2012) until being completely
rewritted, the architecture of the system evolved till the adoption of 
microservice architecture, in order to (i) minimizes the amount of code to
maintain;
(ii) test and grant quality of code;
(iii) modularize the application in several independent services.

\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{images/mezuro-architecture-predicted.png}
  \caption{Arquitetura futura do sistema.}
  \label{fig:architecture-2}
\end{figure}

%TODO Dylan: Possivelmente essa figura não é mais do estado atual - ver com o Manzo e Diego.

A Figura \ref{fig:architecture-2} especifica o atual estado do Mezuro. As
elipses são os diferentes softwares envolvidos e os paralelogramos as
interfaces de comunicação entre eles. Na base do Mezuro encontra-se o Kalibro,
segmentado em três entidades menores (...).

No Mezuro, as funcionalidades podem ser divididas em dois grupos:

\begin{itemize}
  \item Projeto
    \begin{itemize}
    \item \textit{Download} do código-fonte a partir de repositórios (Git, Subversion, Bazaar etc) ou via arquivo compactado;
        \item Escolha da periodicidade do processamento do código (1 dia, 2 dias, semanal, quinzenal e mensal);
        \item Escolha de qual configuração de métricas cada repositório irá utilizar;
        \item Nota de cada métrica da configuração para cada arquivo do repositório;
        \item Análise gráfica de cada arquivo do repositório por meio de um gráfico de pontos com notas ao longo do tempo;
        \item Resultados públicos e acessíveis à comunidade.
    \end{itemize}
    \item Configuração
    \begin{itemize}
    \item Criação de configuração e a possibilidade de clonagem;
        \item Estatísticas sobre as configurações mais populares dentro da comunidade;
        \item Criação de intervalos qualitativos associados aos valores das métricas;
        \item Criação de grupos de leitura para a interpretação textual dos resultados das métricas;
        \item Combinações de métricas nativas para criação de análises compostas e mais complexas.
    \end{itemize}
\end{itemize}

%TODO Dylan: Adicionar duas imagens do Mezuro, a lado a lado

O Mezuro tem o formato de uma rede social, no qual os participantes podem ver a
produção de terceiros por meio da avaliação dos projetos ou do clone das
configurações. Essa interação mútua e aberta pode ser interessante para
desenvolvedores, gerentes de projeto, auditores de software e até
mesmo uma equipe de desenvolvimento inteira. O objetivo final é criar uma
comunidade que veja o valor de tais metodologias e como isso pode contribuir
para o sucesso do seu projeto.

\section{Final remarks}

O Mezuro surge como uma potencial resposta para a falta de monitoramento e
padronização de código-fonte e a necessidade de avaliação do mesmo,
considerando que é um \textit{software} livre, altamente customizável, com
suporte para muitas linguagens computacionais, interface amigável, que fornece
histórico de processamentos e também com uma arquitetura planejada para
incorporar novas funcionalidades.

%TODO Paulo: mais coisas ...

\bibliographystyle{splncs03}
\bibliography{mezuro}
\end{document}
